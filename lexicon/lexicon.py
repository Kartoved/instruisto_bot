'''—Ä–∞–∑–ª–∏—á–Ω—ã–π —Ç–µ–∫—Å—Ç –¥–ª—è –±–æ—Ç–∞'''

from datetime import datetime
import json


LINKS: str = '''üîó –ü–æ–ª–µ–∑–Ω—ã–µ —Å—Å—ã–ª–∫–∏:
‚Ä¢ <a href="https://t.me/babilejo_eo_ru">–ß–∞—Ç —ç—Å–ø–µ—Ä–∞–Ω—Ç–∏—Å—Ç–æ–≤ –≤ —Ç–µ–ª–µ–≥—Ä–∞–º</a> 
‚Ä¢ <a href="https://vk.com/priesperanto">–ü–∞–±–ª–∏–∫ –≠—Å–ø–µ—Ä–∞–Ω—Ç–æ –í–ö</a> 
‚Ä¢ <a href="https://vk.com/por_pigruloj">–ü–∞–±–ª–∏–∫ –í–ö "–≠—Å–ø–µ—Ä–∞–Ω—Ç–æ –¥–ª—è –ª–µ–Ω—Ç—è–µ–≤"</a> 
‚Ä¢ <a href="https://lernu.net/">–ú–Ω–æ–≥–æ—è–∑—ã—á–Ω—ã–π —Å–∞–π—Ç –¥–ª—è –∏–∑—É—á–µ–Ω–∏—è –º–µ–∂–¥—É–Ω–∞—Ä–æ–¥–Ω–æ–≥–æ —è–∑—ã–∫–∞ —ç—Å–ø–µ—Ä–∞–Ω—Ç–æ</a> 
‚Ä¢ <a href="https://kurso.com.br/index.php?ru">–ö—É—Ä—Å –æ–±—É—á–µ–Ω–∏—è –≠—Å–ø–µ—Ä–∞–Ω—Ç–æ. –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –¥–ª—è Android, Windows, Mac, Linux</a> 

–°–ø–∏—Å–æ–∫ –±—É–¥–µ—Ç –ø–æ–ø–æ–ª–Ω—è—Ç—å—Å—è. '''

HELP_COMMAND: str = '''üëã –ü—Ä–∏–≤–µ—Ç, –Ω–∞—á–∏–Ω–∞—é—â–∏–π <em>—ç—Å–ø–µ—Ä–∞–Ω—Ç–∏—Å—Ç</em>!
–Ø –±–æ—Ç-–ø—Ä–µ–ø–æ–¥–∞–≤–∞—Ç–µ–ª—å —è–∑—ã–∫–∞ <strong>–≠—Å–ø–µ—Ä–∞–Ω—Ç–æ</strong>.
–Ø –ø–æ–º–æ–≥—É —Ç–µ–±–µ –≤—ã—É—á–∏—Ç—å —ç—Ç–æ—Ç –ø—Ä–µ–∫—Ä–∞—Å–Ω—ã–π —è–∑—ã–∫!
–û–∑–Ω–∞–∫–æ–º—å—Å—è —Å –º–æ–∏–º–∏ –∫–æ–º–∞–Ω–¥–∞–º–∏ –Ω–∏–∂–µ (–≤—Å–µ –∫–æ–º–∞–Ω–¥—ã –∫–ª–∏–∫–∞–±–µ–ª—å–Ω—ã)üëá:

<strong>/sinprezento</strong> ‚Äî <em>üë§ –ø—Ä–æ—Ñ–∏–ª—å</em>
<strong>/helpo</strong> ‚Äî <em>üóí —Å–ø–∏—Å–æ–∫ –∫–æ–º–∞–Ω–¥</em>
<strong>/memorigilo</strong> ‚Äî  <em>‚è∞ —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏–µ</em>
<strong>/kontakti</strong> ‚Äî <em>üì® —Å–≤—è–∑—å —Å —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–æ–º</em>
<strong>/ligiloj</strong> ‚Äî <em>üîó –ø–æ–ª–µ–∑–Ω—ã–µ —Å—Å—ã–ª–∫–∏ –Ω–∞ –º–∞—Ç–µ—Ä–∏–∞–ª—ã, –≥–¥–µ —Ç—ã –º–æ–∂–µ—à—å –∏–∑—É—á–∞—Ç—å –≠—Å–ø–µ—Ä–∞–Ω—Ç–æ</em>

–°–ª–µ–¥—É—é—â–∏–µ –¥–≤–µ –∫–æ–º–∞–Ω–¥—ã –ø–æ–º–æ–≥—É—Ç —Ç–µ–±–µ –≤—ã—É—á–∏—Ç—å 1194 —Å–∞–º—ã—Ö —É–ø–æ—Ç—Ä–µ–±–∏—Ç–µ–ª—å–Ω—ã—Ö —Å–ª–æ–≤–∞ \
–Ω–∞ <em>–≠—Å–ø–µ—Ä–∞–Ω—Ç–æ</em>. –î–ª—è —ç—Ç–æ–≥–æ –º—ã —Å —Ç–æ–±–æ–π –±—É–¥–µ–º —É—á–∏—Ç—å –Ω–æ–≤—ã–µ —Å–ª–æ–≤–∞ \
–∏ –ø–æ–≤—Ç–æ—Ä—è—Ç—å –∏—Ö —á–µ—Ä–µ–∑ —É–≤–µ–ª–∏—á–∏–≤–∞—é—â–∏–µ—Å—è –ø—Ä–æ–º–µ–∂—É—Ç–∫–∏ –≤—Ä–µ–º–µ–Ω–∏. \
–ó–∞ –æ—Å–Ω–æ–≤—É –º–µ—Ç–æ–¥–∞ –≤–∑—è—Ç–∞ üìà –∫—Ä–∏–≤–∞—è –≠–±–±–∏–Ω–≥–∞—É–∑–∞, –Ω–æ –Ω–µ–º–Ω–æ–≥–æ –º–æ–¥–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω–Ω–∞—è \
–º–æ–∏–º —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–æ–º. 
<strong>/vortstudi</strong> - <em>üß† —É—á–∏—Ç—å –Ω–æ–≤—ã–µ —Å–ª–æ–≤–∞</em>
<strong>/parkerigi</strong> - <em>üîÅ –ø–æ–≤—Ç–æ—Ä—è—Ç—å –∏–∑—É—á–µ–Ω–Ω—ã–µ —Å–ª–æ–≤–∞</em>

–¢–∞–∫–∂–µ —ç—Ç–∏ –∫–Ω–æ–ø–∫–∏ –¥–æ—Å—Ç—É–ø–Ω—ã –≤ <em>–º–µ–Ω—é –±–æ—Ç–∞</em> –∏ –≤ <em>–ø—Ä–æ—Ñ–∏–ª–µ</em>.
'''

ABOUT_REPEATING: str = '‚òùÔ∏è –°–Ω–∞—á–∞–ª–∞ —Ç—ã —É—á–∏—à—å —Å–ª–æ–≤–∞, –∏—Å–ø–æ–ª—å–∑—É—è –∫–æ–º–∞–Ω–¥—É \
<strong>/vortstudi</strong>. –ù–µ –Ω–∞–¥–æ —É—á–∏—Ç—å —Å—Ä–∞–∑—É –≤—Å–µ, –Ω–∞—á–Ω–∏ —Å –ø—è—Ç–∏ —Å–ª–æ–≤, \
–∫–∞–ø–ª—è —Ç–æ—á–∏—Ç –∫–∞–º–µ–Ω—å. –ü—Ä–æ—Å—Ç–æ —á–∏—Ç–∞–µ—à—å —Å–ª–æ–≤–æ –∏ —Å—Ç–∞—Ä–∞–µ—à—å—Å—è –µ–≥–æ –∑–∞–ø–æ–º–Ω–∏—Ç—å. \
–ë—É–¥–µ—Ç –≤–¥–≤–æ–π–Ω–µ –ø–æ–ª–µ–∑–Ω–æ, –µ—Å–ª–∏ —Ç—ã –±—É–¥–µ—à—å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –º–Ω–µ–º–æ—Ç–µ—Ö–Ω–∏–∫–∏.\n\n\
–î–∞–ª–µ–µ —ç—Ç–æ —Å–ª–æ–≤–æ –ø–æ–ø–∞–¥–∞–µ—Ç –≤ —Å–ø–∏—Å–æ–∫ –¥–ª—è –ø–æ–≤—Ç–æ—Ä–µ–Ω–∏—è. –°–ª–æ–≤–∞ –∏–∑ —ç—Ç–æ–≥–æ —Å–ø–∏—Å–∫–∞ \
–¥–æ—Å—Ç—É–ø–Ω—ã –ø–æ –∫–æ–º–∞–Ω–¥–µ <strong>/parkerigi</strong>. –°–ª–æ–≤–∞ —Ç–∞–º –±—É–¥—É—Ç –ø–æ–ø–∞–¥–∞—Ç—å—Å—è \
—á–µ—Ä–µ–∑ —Ä–∞–∑–Ω—ã–µ –ø—Ä–æ–º–µ–∂—É—Ç–∫–∏ –≤—Ä–µ–º–µ–Ω–∏: –µ—Å–ª–∏ —Ç—ã –Ω–∞–∂–∏–º–∞–µ—à—å –Ω–∞ "‚úÖ –ø–æ–º–Ω—é", \
—Ç–æ –∏–Ω—Ç–µ—Ä–≤–∞–ª –±—É–¥–µ—Ç —É–≤–µ–ª–∏—á–∏–≤–∞—Ç—å—Å—è. –ï—Å–ª–∏ –Ω–∞ "‚ùå –Ω–µ –ø–æ–º–Ω—é" ‚Äî —É–º–µ–Ω—å—à–∞—Ç—å—Å—è. \
–ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–π –∏–Ω—Ç–µ—Ä–≤–∞–ª ‚Äî –æ–¥–∏–Ω –¥–µ–Ω—å. –ú–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π ‚Äî 24 –Ω–µ–¥–µ–ª–∏.\n\n\
üèãÔ∏è –°—Ç–∞—Ä–∞–π—Å—è –∑–∞–Ω–∏–º–∞—Ç—å—Å—è —Ä–µ–≥—É–ª—è—Ä–Ω–æ. –ï—Å–ª–∏ –∫–∞–∂–¥—ã–π –¥–µ–Ω—å —É—á–∏—Ç—å –ø–æ 5 —Å–ª–æ–≤,\
—Ç–æ —á–µ—Ä–µ–∑ 239 –¥–Ω–µ–π –±—É–¥–µ—à—å –∑–Ω–∞—Ç—å –≤—Å–µ 1194 —Å–ª–æ–≤–∞ –∏–∑ —Å–ø–∏—Å–∫–∞! \
–≠—Ç–æ–≥–æ —Ö–≤–∞—Ç–∏—Ç –¥–ª—è –±–∞–∑–æ–≤–æ–≥–æ –ø–æ–≤—Å–µ–¥–Ω–µ–≤–Ω–æ–≥–æ –æ–±—â–µ–Ω–∏—è. üòä\n\n\
–†–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫: <a href="https://t.me/prepod_wood">–í—É–¥ –†–æ–º–∞–Ω–æ–≤</a>\n\n\
ü§ó –ë–ª–∞–≥–æ–¥–∞—Ä–Ω–æ—Å—Ç–∏:\n‚Ä¢ –°–ø–∏—Å–æ–∫ —Å–ª–æ–≤ –≤–∑—è—Ç –∏–∑ –ø–æ–¥–±–æ—Ä–∫–∏ —Å–ª–æ–≤ –í–ª–∞–¥–∏–º–∏—Ä–∞ –ö. \
(–Ω–∏–∫ incredibletroth) <a href="https://quizlet.com/incredibletroth/sets">–Ω–∞ —Å–∞–π—Ç–µ Quizlet</a>.\n\
‚Ä¢ –ü—Ä–∏–º–µ—Ä—ã –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–π —Å–∫–æ–Ω—Å—Ç—Ä—É–∏—Ä–æ–≤–∞–Ω—ã ChatGPT.\n‚Ä¢ –ö–æ—Ä—Ä–µ–∫—Ç–∏—Ä–æ–≤—â–∏–∫–∏-—ç—Å–ø–µ—Ä–∞–Ω—Ç–∏—Å—Ç—ã: <a href="https://vk.com/sskumkov">–°–µ—Ä–≥–µ–π –ö—É–º–∫–æ–≤</a>,\
<a href="https://t.me/legado_eo_ru">Tatjana</a>, Aleksei Samsonov, <a href="https://t.me/eteveto">Va</a>.\n\
 ‚Ä¢ –ê–≤–∞—Ç–∞—Ä–∫–∞ –±–æ—Ç–∞ —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–∞ Midjourney –∏ –∏–∑–º–µ–Ω–µ–Ω–∞ –º–æ–∏–º —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–æ–º\n ‚Ä¢ –°–ø–∞—Å–∏–±–æ –≤—Å–µ–º, –∫—Ç–æ —É—á–∞—Å—Ç–≤–æ–≤–∞–ª –≤ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–∏!'

ABOUT_MNEMO: str = '‚òùÔ∏è –ú–Ω–µ–º–æ—Ç–µ—Ö–Ω–∏–∫–∞, –∏–ª–∏ –º–Ω–µ–º–æ–Ω–∏–∫–∞, ‚Äî —ç—Ç–æ —Å–æ–≤–æ–∫—É–ø–Ω–æ—Å—Ç—å \
–ø—Ä–∏—ë–º–æ–≤, —É–≤–µ–ª–∏—á–∏–≤–∞—é—â–∏—Ö –æ–±—ä—ë–º –ø–∞–º—è—Ç–∏ –∏ –æ–±–ª–µ–≥—á–∞—é—â–∏—Ö –∑–∞–ø–æ–º–∏–Ω–∞–Ω–∏–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏, \
–æ—Å–Ω–æ–≤–∞–Ω–Ω–∞—è –Ω–∞ —Å–æ–∑–¥–∞–Ω–∏–∏ –æ–±—Ä–∞–∑–æ–≤ –∏ –∞—Å—Å–æ—Ü–∏–∞—Ü–∏–π. –ú–Ω–µ–º–æ—Ç–µ—Ö–Ω–∏–∫–∏ –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å \
–¥–ª—è –∑–∞–ø–æ–º–∏–Ω–∞–Ω–∏—è —á–µ–≥–æ —É–≥–æ–¥–Ω–æ.\n\nüîó –ù–∏–∂–µ —Å—Å—ã–ª–∫–∏, –∫–∞–∫ –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∏—Ö \
–¥–ª—è –∑–∞–ø–æ–º–∏–Ω–∞–Ω–∏—è –∏–Ω–æ—Å—Ç—Ä–∞–Ω–Ω—ã—Ö —Å–ª–æ–≤:\n\n<a href="https://youtu.be/-uMqUe55v-M">\
‚Ä¢ –≤–∏–¥–µ–æ –Ω–∞ —é—Ç—É–±–µ</a>\n<a href="https://youtu.be/gh3NCuZHVrg">‚Ä¢ –µ—â—ë –æ–¥–Ω–æ –≤–∏–¥–µ–æ</a> \
\n<a href="https://habr.com/ru/articles/156599/">‚Ä¢ —Å—Ç–∞—Ç—å—è –Ω–∞ —Ö–∞–±—Ä–µ</a>\n\n\
‚òùÔ∏è –ö—Ä–æ–º–µ —ç—Ç–∏—Ö –º–∞—Ç–µ—Ä–∏–∞–ª–æ–≤ –µ—Å—Ç—å –∏ –º–Ω–æ–∂–µ—Å—Ç–≤–æ –¥—Ä—É–≥–∏—Ö. –ò–∑—É—á–∏ –≤–æ–ø—Ä–æ—Å, \
—ç—Ç–æ –∫—Ä—É—Ç–∞—è —Ç–µ–º–∞, –∫–æ—Ç–æ—Ä–∞—è –ø—Ä–∏–≥–æ–¥–∏—Ç—Å—è —Ç–µ–±–µ –≤–æ –º–Ω–æ–≥–∏—Ö —Å—Ñ–µ—Ä–∞—Ö –∂–∏–∑–Ω–∏!'

CONTACT: str = 'ü™≤ –ù–∞—à—ë–ª –±–∞–≥ –∏–ª–∏ –æ—à–∏–±–∫—É?\nüí° –ï—Å—Ç—å –∏–¥–µ–∏ –¥–ª—è —É–ª—É—á—à–µ–Ω–∏—è?\n\
üòä –¢–µ–±–µ –≤—Å—ë –Ω—Ä–∞–≤–∏—Ç—Å—è, –ø—Ä–æ—Å—Ç–æ —Ö–æ—á–µ—à—å —Å–∫–∞–∑–∞—Ç—å —Å–ø–∞—Å–∏–±–æ?\
\nüñå –ù–∞–ø–∏—à–∏ –æ–± —ç—Ç–æ–º –º–æ–µ–º—É —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫—É –æ—Ç–≤–µ—Ç–Ω—ã–º —Å–æ–æ–±—â–µ–Ω–∏–µ–º –≤ —ç—Ç–æ–º —á–∞—Ç–µ. –ò—Å–ø–æ–ª—å–∑—É–π —Ç–æ–ª—å–∫–æ —Ç–µ–∫—Å—Ç, –≤–ª–æ–∂–µ–Ω–∏—è –ø–µ—Ä–µ—Å—ã–ª–∞—Ç—å —è –ø–æ–∫–∞ –Ω–µ —É–º–µ—é.\
–ï—Å–ª–∏ –ø–µ—Ä–µ–¥—É–º–∞–ª, —Ç–æ –Ω–∞–∂–º–∏ <em>"–æ—Ç–º–µ–Ω–∞"</em>'

LEXICON_COMMANDS_RU: dict[str, str] = {
    "/sinprezento": "üë§ –ø—Ä–æ—Ñ–∏–ª—å",
    "/helpo": "‚ùì –æ–ø–∏—Å–∞–Ω–∏–µ –±–æ—Ç–∞, —Å–ø–∏—Å–æ–∫ –∫–æ–º–∞–Ω–¥",
    "/vortstudi": "üìñ —É—á–∏—Ç—å –Ω–æ–≤—ã–µ —Å–ª–æ–≤–∞",
    "/parkerigi": "üîÅ –ø–æ–≤—Ç–æ—Ä—è—Ç—å –∏–∑—É—á–µ–Ω–Ω—ã–µ —Å–ª–æ–≤",
    "/memorigilo": "‚è∞ —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏–µ",
    "/ligiloj": "üîó –ø–æ–ª–µ–∑–Ω—ã–µ —Å—Å—ã–ª–∫–∏",
    "/kontakti": "üì® —Å–≤—è–∑—å —Å —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–æ–º",    
}

ABOUT_UPDATE: str = f""


RESET_MESSAGE: str = "‚ÄºÔ∏è‚ÄºÔ∏è‚ÄºÔ∏è –í—ã —É–≤–µ—Ä–µ–Ω—ã, —á—Ç–æ —Ö–æ—Ç–∏—Ç–µ —Å–±—Ä–æ—Å–∏—Ç—å –ø—Ä–æ–≥—Ä–µ—Å—Å? ‚ÄºÔ∏è‚ÄºÔ∏è‚ÄºÔ∏è\
\n\n–≠—Ç–æ –¥–µ–π—Å—Ç–≤–∏–µ –ù–ï–û–ë–†–ê–¢–ò–ú–û! –°–±—Ä–æ—Å–∏—Ç—Å—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞, —É–¥–∞–ª—è—Ç—Å—è –≤—Å–µ –∏–∑—É—á–µ–Ω–Ω—ã–µ\
 —Å–ª–æ–≤–∞ –∏ –ø—Ä–∏–¥—ë—Ç—Å—è —É—á–∏—Ç—å –∏—Ö –∑–∞–Ω–æ–≤–æ!"


def get_date_of_closest_repetition(explored_words: list) -> str:
    '''–ø–æ–ª—É—á–∏—Ç—å –¥–∞—Ç—É –±–ª–∏–∂–∞–π—à–µ–≥–æ –ø–æ–≤—Ç–æ—Ä–µ–Ω–∏—è'''
    try:
        date_of_closest_repetition = datetime.strptime(
            explored_words[0]["–¥–∞—Ç–∞ –ø–æ–≤—Ç–æ—Ä–µ–Ω–∏—è"], "%d-%m-%Y")
        for word in explored_words:
            if datetime.strptime(word["–¥–∞—Ç–∞ –ø–æ–≤—Ç–æ—Ä–µ–Ω–∏—è"], "%d-%m-%Y") < date_of_closest_repetition:
                date_of_closest_repetition = datetime.strptime(
                    word["–¥–∞—Ç–∞ –ø–æ–≤—Ç–æ—Ä–µ–Ω–∏—è"], "%d-%m-%Y")
        if date_of_closest_repetition.strftime("%d-%m-%Y") <= datetime.now().strftime("%d-%m-%Y"):
            return '–ë–ª–∏–∂–∞–π—à–∞—è –¥–∞—Ç–∞ –ø–æ–≤—Ç–æ—Ä–µ–Ω–∏—è <strong>—Å–µ–≥–æ–¥–Ω—è</strong>.'
        return f'–ë–ª–∏–∂–∞–π—à–µ–µ –ø–æ–≤—Ç–æ—Ä–µ–Ω–∏–µ —Å–ª–æ–≤ –±—É–¥–µ—Ç <strong> {date_of_closest_repetition.strftime("%d-%m-%Y")}</strong>'
    except IndexError:
        return '–°–ª–æ–≤ –¥–ª—è –ø–æ–≤—Ç–æ—Ä–µ–Ω–∏—è –Ω–µ—Ç. –ù–∞—á–Ω–∏—Ç–µ —É—á–∏—Ç—å —Å–ª–æ–≤–∞, —á—Ç–æ–±—ã –∏—Ö –ø–æ–≤—Ç–æ—Ä—è—Ç—å.'


def get_profile_message(username: str, list_name: str, chat_id: int) -> str:
    '''–ø–æ–ª—É—á–∏—Ç—å —Å–æ–æ–±—â–µ–Ω–∏–µ –ø—Ä–æ—Ñ–∏–ª—è'''
    now = datetime.now().strftime("%d-%m-%Y")
    counter = 0
    memorized_words, know_good, know_perfect = calculate_progress(
        list_name, chat_id)
    with open(f"users_data/{chat_id}/explored_words.json", encoding="utf-8") as f:
        list_of_words = json.load(f)
    date_of_closest_repetition = get_date_of_closest_repetition(list_of_words)
    for word in list_name:
        if word["–¥–∞—Ç–∞ –ø–æ–≤—Ç–æ—Ä–µ–Ω–∏—è"] <= now:
            counter += 1
    return f'''üë§ –¢–≤–æ–π –ø—Ä–æ—Ñ–∏–ª—å: <strong>{username}</strong>\n\n\
üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ (–≤ –∫–æ–ª–∏—á–µ—Å—Ç–≤–µ —Å–ª–æ–≤):\n‚Ä¢ –∏–∑—É—á–∏–ª \
<strong>{len(know_good)+len(know_perfect)} –∏–∑ 1194 </strong>\
({round(len(know_perfect)/1194*100)+round(len(know_good)/1194*10, 2)}%) \n\
‚Ä¢ –Ω–∞—á–∞–ª —É—á–∏—Ç—å <strong>{len(memorized_words)}</strong>\n\
‚Ä¢ –∑–Ω–∞–µ—à—å —Ö–æ—Ä–æ—à–æ <strong>{len(know_good)}</strong>\n\
‚Ä¢ –∑–Ω–∞–µ—à—å –æ—Ç–ª–∏—á–Ω–æ <strong>{len(know_perfect)}</strong>\n\n\
üìÜ –°–µ–≥–æ–¥–Ω—è —Å–ª–æ–≤ –¥–ª—è –ø–æ–≤—Ç–æ—Ä–µ–Ω–∏—è: <strong>{counter}</strong>.\n\
{date_of_closest_repetition}\n
{get_time_of_reminder(chat_id)}'''


def calculate_progress(list_of_words: list,
                       chat_id: int):
    '''–ø–æ–¥—Å—á–∏—Ç–∞—Ç—å –ø—Ä–æ–≥—Ä–µ—Å—Å'''
    with open(f"users_data/{chat_id}/explored_words.json", encoding="utf-8") as f:
        list_of_words = json.load(f)
        memorized_words = [
            word for word in list_of_words if word["–∏–Ω—Ç–µ—Ä–≤–∞–ª"] <= 1]
        know_good = [word for word in list_of_words if 2 <=
                     word["–∏–Ω—Ç–µ—Ä–≤–∞–ª"] <= 3]
        know_perfect = [word for word in list_of_words if 4 <=
                        word["–∏–Ω—Ç–µ—Ä–≤–∞–ª"] <= 6]
        return memorized_words, know_good, know_perfect


def format_learning_message(new_word: dict) -> str:
    '''—Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞—Ç—å —Å–æ–æ–±—â–µ–Ω–∏–µ –æ–± –∏–∑—É—á–µ–Ω–Ω–æ–º —Å–ª–æ–≤–µ'''
    return f'''‚úç  <em>{new_word['–Ω–∞ —Ä—É—Å—Å–∫–æ–º']}</em> ‚Üí <em>{new_word['–Ω–∞ —ç—Å–ø–µ—Ä–∞–Ω—Ç–æ']}</em>\n\n\
<strong>–ü—Ä–∏–º–µ—Ä –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è:</strong>\n<em>{new_word['–ø—Ä–∏–º–µ—Ä –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è']}</em>'''


def format_repeating_message(word: dict) -> str:
    '''—Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞—Ç—å —Å–æ–æ–±—â–µ–Ω–∏–µ –æ –ø–æ–≤—Ç–æ—Ä–µ–Ω–∏–∏ —Å–ª–æ–≤–∞'''
    return f'''‚ùì –ö–∞–∫ –±—É–¥–µ—Ç <em>{word['–Ω–∞ —Ä—É—Å—Å–∫–æ–º']}</em> –Ω–∞ –≠—Å–ø–µ—Ä–∞–Ω—Ç–æ?\n\n\
<strong>–û—Ç–≤–µ—Ç:</strong> <em><tg-spoiler>{word['–Ω–∞ —ç—Å–ø–µ—Ä–∞–Ω—Ç–æ']}</tg-spoiler></em>\n\n\
<strong>–ü—Ä–∏–º–µ—Ä –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è:</strong>\n<em><tg-spoiler>{word['–ø—Ä–∏–º–µ—Ä –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è']}\
</tg-spoiler></em>'''


def get_time_of_reminder(chat_id):
    '''–ø–æ–ª—É—á–∏—Ç—å –≤—Ä–µ–º—è –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏—è'''
    with open('users_data/reminders.json', encoding="utf-8") as f:
        reminders = json.load(f)
        try:
            return f"‚è∞ –ù–∞–ø–æ–º–∏–Ω–∞–Ω–∏—è –ø—Ä–∏—Ö–æ–¥—è—Ç –≤ <strong>{reminders[str(chat_id)]}</strong> –≤ –¥–Ω–∏ –ø–æ–≤—Ç–æ—Ä–µ–Ω–∏–π."
        except KeyError:
            return "‚è∞ –ù–∞–ø–æ–º–∏–Ω–∞–Ω–∏—è –Ω–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã."
